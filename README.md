# H1 Camera System v2.0

–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞ –∫–∞–º–µ—Ä —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π:
- **Frontend**: React —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º MJPEG —Å—Ç—Ä–∏–º–æ–≤ (Docker)
- **Backend**: Node.js –ø—Ä–æ–∫—Å–∏ + Python FastAPI —Å–µ—Ä–≤–∏—Å –∫–∞–º–µ—Ä
- **Service Manager**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º —Å–µ—Ä–≤–∏—Å–æ–≤

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# Backend –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
cd backend
npm run install-deps

# Frontend (Docker)
cd ../frontend
docker-compose up --build
```

### 2. –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

#### Backend (Node.js + Python)
```bash
# –ó–∞–ø—É—Å–∫ Node.js —Å–µ—Ä–≤–µ—Ä–∞ (–ø—Ä–æ–∫—Å–∏ + —Ñ–∞–π–ª–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä)
cd backend
npm start

# –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ - –∑–∞–ø—É—Å–∫ Python —Å–µ—Ä–≤–∏—Å–∞ –∫–∞–º–µ—Ä
cd backend
python src/services/camera_service.py
```

#### Frontend (Docker Compose)
```bash
# –ó–∞–ø—É—Å–∫ React frontend –≤ Docker
cd frontend
docker-compose up --build

# –ò–ª–∏ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
docker-compose up -d --build
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Frontend (React + Docker)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ MJPEG —Å—Ç—Ä–∏–º–æ–≤** –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- **React Query** –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è API –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π UI** —Å skeleton-–∑–∞–≥—Ä—É–∑–∫–∞–º–∏ –∏ –∞–Ω–∏–º–∞—Ü–∏—è–º–∏
- **–°—Ç–∞—Ç—É—Å-–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã** –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞–º–µ—Ä—ã
- **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** –¥–ª—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

### Backend (Node.js)
- **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏** –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Python —Å–µ—Ä–≤–∏—Å—É
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ MJPEG** —Å—Ç—Ä–∏–º–æ–≤
- **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **–§–∞–π–ª–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞–º–∏

### Python Service (FastAPI)
- **FastAPI** –≤–º–µ—Å—Ç–æ Flask –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–û—á–µ—Ä–µ–¥–∏ –∫–∞–¥—Ä–æ–≤** –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ MJPEG —Å—Ç—Ä–∏–º–∏–Ω–≥–∞
- **–ü—Ä—è–º–∞—è –æ—Ç–¥–∞—á–∞ JPEG** –±–µ–∑ base64 –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- **–¢–∏–ø–∏–∑–∞—Ü–∏—è** —Å Pydantic –º–æ–¥–µ–ª—è–º–∏
- **Health check** —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### Service Manager
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** —Å–µ—Ä–≤–∏—Å–æ–≤
- **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å–±–æ—è—Ö** —Å –ª–∏–º–∏—Ç–æ–º –ø–æ–ø—ã—Ç–æ–∫
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π
- **Health check** –¥–ª—è Node.js —Å–µ—Ä–≤–µ—Ä–∞

## üì° API Endpoints

### Python Service (–ø–æ—Ä—Ç 5000)
```
GET  /health                    - Health check
GET  /api/status               - –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
GET  /api/cameras              - –°–ø–∏—Å–æ–∫ –∫–∞–º–µ—Ä
POST /api/cameras/start-all    - –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –∫–∞–º–µ—Ä
POST /api/cameras/stop-all     - –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∫–∞–º–µ—Ä
GET  /api/cameras/{id}/mjpeg   - MJPEG —Å—Ç—Ä–∏–º –∫–∞–º–µ—Ä—ã
POST /api/cameras/{id}/start   - –ó–∞–ø—É—Å–∫ –∫–∞–º–µ—Ä—ã
POST /api/cameras/{id}/stop    - –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞–º–µ—Ä—ã
```

### Node.js Proxy (–ø–æ—Ä—Ç 3001)
```
GET  /api/status               - –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
GET  /api/cameras/*            - –ü—Ä–æ–∫—Å–∏ –∫ Python —Å–µ—Ä–≤–∏—Å—É
POST /api/fs/*                - –§–∞–π–ª–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# Node.js —Å–µ—Ä–≤–µ—Ä
NODE_SERVER_URL=http://localhost:3001  # URL –¥–ª—è Service Manager

# Python —Å–µ—Ä–≤–∏—Å
CAMERA_FRAME_RATE=30                   # FPS –¥–ª—è –∫–∞–º–µ—Ä
CAMERA_RESOLUTION=640x480              # –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–∞–º–µ—Ä
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª
`backend/configs.conf` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–æ–±–æ—Ç–∞ –∏ –ø—É—Ç–µ–π

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ö–∞–º–µ—Ä—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–∞–º–µ—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ —Å–∏—Å—Ç–µ–º–µ
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Python —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω: `http://localhost:5000/health`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Python —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ –æ—à–∏–±–∫–∏ OpenCV

### MJPEG —Å—Ç—Ä–∏–º –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞–º–µ—Ä–∞ –∞–∫—Ç–∏–≤–Ω–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Node.js –ø—Ä–æ–∫—Å–∏

### Frontend –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –≤ Docker
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker –∏ Docker Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏: `docker-compose logs frontend`

### Service Manager –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–∏—Å—ã
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Node.js —Å–µ—Ä–≤–µ—Ä–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `service_manager.log`

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏
- **Node.js**: –ö–æ–Ω—Å–æ–ª—å + —Ñ–∞–π–ª –ª–æ–≥–æ–≤
- **Python**: –ö–æ–Ω—Å–æ–ª—å + —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏
- **Service Manager**: `service_manager.log`
- **Frontend**: `docker-compose logs frontend`

### Health Checks
- **Python Service**: `http://localhost:5000/health`
- **Node.js Server**: `http://localhost:3001/api/status`
- **Frontend**: `http://localhost:3000`

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

### v2.0 –û—Å–Ω–æ–≤–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- ‚úÖ FastAPI –≤–º–µ—Å—Ç–æ Flask
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π MJPEG —Å—Ç—Ä–∏–º–∏–Ω–≥
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∏–º–æ–≤
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –¢–∏–ø–∏–∑–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –û—á–µ—Ä–µ–¥–∏ –∫–∞–¥—Ä–æ–≤ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ Health check —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ Docker Compose –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª LICENSE 